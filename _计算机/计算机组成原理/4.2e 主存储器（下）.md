## 只读存储器 ROM
- 发展历史
    厂家写好了内容->
    用户可以一次性写内容->
    能够擦除，可以多次写->
    电可擦写，直接连接到计算机->
1. 掩模ROM MROM
    ![[Pasted image 20250424131319.png]]
    有MOS管->低电平->1
    无MOS管->高电平->0
    读放大器取反
2. PROM 一次性编程
    ![[Pasted image 20250424131437.png]]
    熔丝烧断则变成0，破坏性编程
3. EPROM 多次性编程
    ![[Pasted image 20250424131655.png]]
    D端不加正电压->不形成浮动栅->1
    驱散浮动栅，可重新编程
4. EEPROM （电可擦写）多次性编程
5. Flash Memory 闪速型存储器
    比EEPROM更快，甚至具备RAM的一些功能
## 存储器与CPU的连接
#### 存储器容量的扩展
- 位扩展
    增加存储字长
    1K4b + 1K4b -> 1K8b
    (10根地址、8根数据线）
    ![[Pasted image 20250424132452.png|300]]
- 字扩展
    增加存储字的数量
    1K8b + 1K8b -> 2K8b
    11根地址线、8根数据线
    - 不能同时工作：
       多出来的一根地址线A<sub>10</sub>，用于片选信号
       片选低电平时有效，0->第一个，1->反相后第二个
    ![[Pasted image 20250424132607.png|300]]    
- 位/字同时扩展
    8 \* 1K4b -> 4K8b
    12根地址线（2根片选）、8根数据线
    先位扩展（低位选地址）->
    再字扩展（高位选芯片）
    片选译码
    ![[Pasted image 20250424133051.png|400]]
#### 存储器与CPU的连接
1. 地址线的连接
    CPU地址线一般多于芯片，低位作为地址，高位作为片选
2. 数据线的连接
    可能多于芯片，作位扩展，使输入/输出能满足CPU的要求
3. 读/写命令线的连接
    读、写线连接到芯片上（ROM只读）
4. 片选线的连接
    非常重要
    - 体现访问的是存储器而不是I/O
    - 高位片选
5. 合理选择存储芯片
    ROM：系统
    RAM：用户编程
    性能差异
6. 其他
    时序、负载...
e.g. 4.1
    MREQ一杠：低电平访问存储器，高电平访问IO
    写出2进制的地址->
    划分低位、片选、
    \*不要忘了MREQ一杠（访存信号）
    ![[Pasted image 20250424135327.png|400]]
    ![[Pasted image 20250424135405.png|400]]
    0000 0000 0000 0000
    0000 1111 1111 1111
    0001 0000 0000 0000
    0011 1111 1111 1111
    %%没懂%%
## 主存储器：存储器的校验
- 合法代码集合
    全集：无法检错
    二倍冗余：检一位错
    三倍冗余：检一位错，纠一位错
    四倍（？）冗余：2,1
    五倍冗余：2,2
- 编码的最小距离 L
    任意两组合法代码间 *二进制位数* 的最小差异
    $$L-1=D(detection)+C(correct)(D\geq C)$$
#### 汉明码：具有一位纠错的代码
奇偶校验：加1位校验位，使合法代码为奇/偶
分组校验：加2位校验位，划分前后组分别校验
- 汉明码的分组是非划分方式
    如果有7位：
    ![[Pasted image 20250424203140.png]]
    3位校验码$$2^k\geq n+k+1$$
    各组，异或结果校验为0
    在1位出错下，3个校验码的二进制转换成十进制就是出错位，全0则没出错
    划分方式：第n位为1的数分在第n组
    - 检测位：$$2^i$$
    i组和j组共同占有：$2^{i-1}+2^{j-1}$
    xx0x011
    1000011
    $C_1 = 3\oplus 5 \oplus 7$
    
    纠错过程：
    $P_1=1 \oplus 3 \oplus 5 \oplus 7$
    不出错，$P_1P_2P_4$全为0
    $P_4P_2P_1$的值即是错误位数
    \*校验位错，可不纠
    配奇原则同理
    最小距离：3
## 提高访存速度的措施
\*存储墙
- 采用高速器件
- 采用层次结构
- **调整主存结构**
1. 单体多字系统
    cpu16位-存储器64位，一次取4条到数据条到数据寄存器中
    16位写入可能会出现错误覆盖：额外硬件解决
    可能会读到跳转指令，则剩下3条无用
2. 多体并行方式
    1. 高位交叉
        ![[Pasted image 20250424213442.png]]
        前两位代表 *存储体体号*
        4个存储体独立并行工作
        适合扩展容量，不适合提升带宽
    2. 低位交叉
        ![[Pasted image 20250424213804.png]]
        轮流编号
        后两位代表 *体号*
        不改变存取周期的前提下，增加存储器的带宽
        4体低位交叉存储器：
            存取周期T=4倍总线传输周期$\tau$
            $T+(n-1)\tau$的时间
3. 高性能存储芯片
    1. 同步RAM SDRAM
        存储器速度非常快，让CPU无需等待（通常RAM是异步）
    2.  RDRAM
        From Rambus，解决 *存储器带宽*
    3. 带Cache DRAM
        Cache存一行
        适合 *猝发式读取*
        
    

